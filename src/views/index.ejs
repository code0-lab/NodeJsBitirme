<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><%= title || 'Yggdrasil' %></title>
  <link rel="stylesheet" href="/styles/main.css" />
</head>
<body>
  <%- include('partials/navbar') %>

  <header class="nyt-hero">
    <div class="container">
      <h1>Haberi Takip Etmenin En Güçlü Yolu</h1>

  <!-- Hero/plan kartları tamamen kaldırıldı; sadece iki sütunlu liste kaldı -->
  <main class="container">
    <% const blogsArr = Array.isArray(blogs) ? blogs : []; const newsArr = Array.isArray(news) ? news : []; %>

    <section class="home-grid">
      <div class="home-column home-left">
        <h2 class="auth-title">Bloglar</h2>
        <% if (!blogsArr.length) { %>
          <p class="muted">Henüz blog yok.</p>
        <% } else { %>
          <% blogsArr.forEach(function(b){ %>
            <a class="card media-card card-link" href="/blogs/<%= b._id %>" title="<%= b.title %>">
              <% if (b.coverImageUrl) { %>
                <img class="media-cover" src="<%= b.coverImageUrl %>" alt="<%= b.title %> kapak" loading="lazy" />
              <% } %>
              <div class="card-body">
                <h3 class="card-title"><%= b.title %></h3>
                <p class="muted">
                  Yazar: <%= b.author?.name || 'Anonim' %> · <%= new Date(b.createdAt).toLocaleDateString('tr-TR') %>
                </p>
                <!-- Hover ile açılan önizleme -->
                <p class="preview">
                  <%= String(b.content || '').replace(/<[^>]+>/g, '').slice(0, 160) %>...
                </p>
              </div>
            </a>
          <% }) %>
        <% } %>
      </div>

      <div class="home-column home-right">
        <h2 class="auth-title">Haberler</h2>
        <% if (!newsArr.length) { %>
          <p class="muted">Henüz haber yok.</p>
        <% } else { %>
          <% newsArr.forEach(function(n){ %>
            <a class="card media-card card-link" href="/news/<%= n._id %>" title="<%= n.title %>">
              <% if (n.imageUrl) { %>
                <img class="media-cover" src="<%= n.imageUrl %>" alt="<%= n.title %> görsel" loading="lazy" />
              <% } %>
              <div class="card-body">
                <h3 class="card-title"><%= n.title %></h3>
                <p class="muted">
                  Kategori: <%= n.category?.name || 'Belirtilmemiş' %> · <%= new Date(n.createdAt).toLocaleDateString('tr-TR') %>
                </p>
                <!-- Hover ile açılan önizleme -->
                <p class="preview">
                  <%= String(n.content || '').replace(/<[^>]+>/g, '').slice(0, 160) %>...
                </p>
              </div>
            </a>
          <% }) %>
        <% } %>
      </div>
    </section>
  </main>

  <%- include('partials/footer') %>
</body>
</html>